<div ng-include="'views/partials/nav.html'"></div>
<md-button class="md-raised md-warn" id="logOut" ng-click="pc.userService.logout()"><ng-md-icon icon="logout"></ng-md-icon> Log Out {{pc.userObject.name}}</md-button>
<h1 class="pgHead">Pantry</h1>
<section layout="row" ng-init="pc.getFood()">
  <div hide show-gt-sm flex="15"></div>
  <div flex>
    <md-card layout-padding>
      <table id="pantryTable" width="100%">
        <thead>
          <th id="smTh">
            <md-button ng-show="pc.sortMethod!=='qty'" ng-click="pc.sort('qty')">Qty</md-button>
            <md-button ng-show="pc.sortMethod=='qty' && pc.reverse == true" class="md-primary md-hue-1" ng-click="pc.sort('qty')">Qty<ng-md-icon icon="keyboard_arrow_up" style="fill: green"></ng-md-icon></md-button>
            <md-button ng-show="pc.sortMethod=='qty' && pc.reverse == false" class="md-primary md-hue-1" ng-click="pc.sort('qty')">Qty<ng-md-icon icon="keyboard_arrow_down" style="fill: green"></ng-md-icon></md-button>
          </th>
          <th id="lgTh">
            <md-button ng-show="pc.sortMethod!=='name'" ng-click="pc.sort('name')">Name</md-button>
            <md-button ng-show="pc.sortMethod=='name' && pc.reverse == true" class="md-primary md-hue-1" ng-click="pc.sort('name')">Name<ng-md-icon icon="keyboard_arrow_up" style="fill: green"></ng-md-icon></md-button>
            <md-button ng-show="pc.sortMethod=='name' && pc.reverse == false" class="md-primary md-hue-1" ng-click="pc.sort('name')">Name<ng-md-icon icon="keyboard_arrow_down" style="fill: green"></ng-md-icon></md-button>
          </th>
          <th id="smTh">
            <md-button ng-show="pc.sortMethod!=='expiry'" ng-click="pc.sort('expiry')">Expiry</md-button>
            <md-button ng-show="pc.sortMethod=='expiry' && pc.reverse == true" class="md-primary md-hue-1" ng-click="pc.sort('expiry')">Expiry<ng-md-icon icon="keyboard_arrow_up" style="fill: green"></ng-md-icon></md-button>
            <md-button ng-show="pc.sortMethod=='expiry' && pc.reverse == false" class="md-primary md-hue-1" ng-click="pc.sort('expiry')">Expiry<ng-md-icon icon="keyboard_arrow_down" style="fill: green"></ng-md-icon></md-button>
          </th>
          <!-- <th id="smTh"><md-button class="md-raised">Sort</md-button></th> -->
          <!-- <th id="smTh">
            
          </th> -->
          <th id="btTh" class="centerText">
            <md-button class="md-raised md-primary" ng-click="pc.addToggle=true; pc.cancelEdit()" ng-show="!pc.addToggle">
              New <ng-md-icon icon="add_circle_outline"></ng-md-icon>
            </md-button>
          </th>
        </thead>
        <tbody id="pantryTbody">
          <tr ng-show="pc.addToggle" id="addTr">
            <form name="foodAddForm" ng-submit="pc.addItem()">
              <td class="inputTd">
                <md-input-container class="inputCon">
                  <input md-maxlength="20" name="qtyField" ng-model="pc.pantryAdd.qty" required>
                </md-input-container>
              </td>
              <td class"inputTd">
                <md-input-container class="inputCon">
                  <input md-maxlength="50" name="nameField" ng-model="pc.pantryAdd.name" required>
                </md-input-container>
              </td>
              <td class"inputTd">
                <md-input-container class="inputCon">
                  <md-datepicker valid="" md-hide-icons="calendar" name="dateField" ng-model="pc.pantryAdd.expiry" required></md-datepicker>
                </md-input-container>
              </td>
              <td class="inputTd centerText" colspan="2">
                  <md-button class="md-icon-button" type="submit">
                    <md-tooltip md-direction="bottom">Add to Pantry</md-tooltip><ng-md-icon icon="add_circle" style="fill: #4CAF50"></ng-md-icon>
                  </md-button>
                  <md-button class="md-icon-button" ng-click="pc.addToggle=false" ng-show="pc.addToggle">
                    <md-tooltip md-direction="bottom">Cancel</md-tooltip><ng-md-icon icon="cancel" style="fill: #F44336"></ng-md-icon>
                  </md-button>
              </td>
            </form>
          </tr>
          <tr ng-repeat="food in pc.foodObj.food | orderBy:pc.sortMethod:pc.reverse">
            <form name="foodEditForm" ng-submit="pc.editFood(food.name)">
              <td ng-hide="pc.editToggle === $index">{{food.qty}}</td>
              <td ng-show="pc.editToggle === $index">
                <md-input-container class="inputCon">
                  <label>{{food.qty}}</label>
                  <input md-maxlength="20" name="qtyField" ng-model="pc.pantryEdit.qty" required>
                  <!-- ng-value="food.qty" -->
                </md-input-container>
              </td>
              <td ng-hide="pc.editToggle === $index">{{food.name}}</td>
              <td ng-show="pc.editToggle === $index">
                <md-input-container class="inputCon">
                  <label>{{food.name}}</label>
                  <input md-maxlength="50" name="qtyField" ng-model="pc.pantryEdit.name" required>
                </md-input-container>
              </td>
              <td ng-hide="pc.editToggle === $index">{{food.expiry}}</td>
              <td ng-show="pc.editToggle === $index">
                <md-input-container class="inputCon">
                  <label>{{food.expiry}}</label>
                  <md-datepicker valid="" md-hide-icons="calendar"name="dateField" ng-model="pc.pantryEdit.expiry" required></md-datepicker>
                </md-input-container>
              </td>
              <!-- <td ng-hide="pc.editToggle === $index"></td>
              <td ng-show="pc.editToggle === $index">
                <md-button class="md-raised md-primary" type="submit" name="submit" ng-click="pc.editFood(food.name)">Confirm</md-button>
              </td> -->
              <td ng-hide="pc.editToggle === $index" class="centerText">
                <md-button class="md-icon-button" ng-click="pc.recipeSuggest(food.name)">
                  <md-tooltip md-direction="bottom">Recipe Suggestion</md-tooltip><ng-md-icon icon="restaurant" style="fill: #FF9800"></ng-md-icon>
                </md-button>
                <md-button class="md-icon-button" ng-click="pc.editToggle = $index">
                  <md-tooltip md-direction="bottom">Edit</md-tooltip><ng-md-icon icon="mode_edit" style="fill: #2196F3"></ng-md-icon>
                </md-button>
                <md-button class="md-icon-button" ng-click="pc.deleteFood(food.name)">
                  <md-tooltip md-direction="bottom">Delete</md-tooltip><ng-md-icon icon="delete" style="fill: #F44336"></ng-md-icon>
                </md-button>
              </td>
              <td ng-show="pc.editToggle === $index" class="centerText">
                <md-button class="md-icon-button" type="submit">
                  <md-tooltip md-direction="bottom">Save Changes</md-tooltip><ng-md-icon icon="save" style="fill: #4CAF50"></ng-md-icon>
                </md-button>
                <md-button class="md-icon-button" ng-click="pc.editToggle = -1">
                  <md-tooltip md-direction="bottom">Cancel</md-tooltip><ng-md-icon icon="cancel" style="fill: #F44336"></ng-md-icon>
                </md-button>
              </td>
            </form>
          </tr>
        </tbody>
      </table>
    </md-card>
  </div>
  <div hide show-gt-sm flex="15"></div>
</section>
